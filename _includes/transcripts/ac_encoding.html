<div class="slide" role='region' aria-label="Slide 1 of 14" id="slide-1" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=1"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=1">Slide 1</a></noscript></div><div role='region'><p>Hello everybody, my name is Anita Chen and I work as a project manager at Fraunhofer Fokus in Berlin.</p>
<p>My lightning talk for this workshop will be about using AI methodologies to predict optimal video encoding ladders on the web.</p></div><div class="slide" role='region' aria-label="Slide 2 of 14" id="slide-2" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=2"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=2">Slide 2</a></noscript></div><div role='region'><p>For this talk, I will first cover the basics of per-title encoding.</p>
<p>Next, I will introduce our web-based AI solution for per-title/per-scene encoding.</p>
<p>Lastly, I will recap this presentation as well as discuss next steps in this project.</p></div><div class="slide" role='region' aria-label="Slide 3 of 14" id="slide-3" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=3"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=3">Slide 3</a></noscript></div><div role='region'><p>For the per-title encoding section, I will provide a brief overview of per-title encoding, its differences from other encoding methods, as well as its advantages and disadvantages.</p></div><div class="slide" role='region' aria-label="Slide 4 of 14" id="slide-4" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=4"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=4">Slide 4</a></noscript></div><div role='region'><p>In a standard encoding ladder, bitrate/resolution pairs are fixed and the same encoding settings are applied across all types of videos.</p>
<p>For example, with the Apple h264 encoding ladder, a 1080p video would be encoded with 7800 kbit/s.</p>
<p>However, there are various types of content: animation, nature documentaries, action/sports - which either have low/high complexity, as well as high/low redundancy, and the same encoding ladder is applied to all videos.</p>
<p>As a result, bitrates are either under or overused, which can result in increasing storage costs.</p>
<p>With per-title encoding, however, encoding settings are based on the content itself.</p>
<p>With per-scene encoding, encoding settings are adjusted based on different scenes within the content.</p></div><div class="slide" role='region' aria-label="Slide 5 of 14" id="slide-5" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=5"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=5">Slide 5</a></noscript></div><div role='region'><p>So, how does per-title encoding work?</p>
<p>First, the source video file is analyzed for its complexity.</p>
<p>With the analysis, several test encodes are produced to calculate its corresponding VMAF values.</p>
<p>These test encodes consist of different encoding settings.</p>
<p>Then, a convex hull is estimated, so that the resulting encoding ladder consists of bitrate/resolution pairs that lie close to the convex hull.</p>
<p>Finally, production encoding is performed, where a video is encoded based on the resulting ladder.</p>
<p>For purposes of comparison, we used a 1080p sports video and encoded it with 3 different methods.</p>
<p>In this context, the benchmark for quality comparisons are VMAF and PSNR, both of which are quality metrics for video files.</p>
<p>VMAF was developed by Netflix a few years ago in order to capture the perception of video quality in a more accurate fashion.</p>
<p>It is measured on a scale of 0-100, with 100 being perfect quality.</p>
<p>On slide 10, you can see a comparison of bitrates and quality scores between each type of encoding.</p>
<p>With per-title and per-scene encoding, bitrates and bandwidth are reduced by at least 50%, while maintaining the same quality without any perceptual loss.</p>
<p>Additionally, through comparing file sizes, we found that storage and delivery also decreased by at least 50%.</p>
<p>However, a major disadvantage in this method is that a large number of test encodes is required in order to derive a proper/accurate encoding ladder.</p></div><div class="slide" role='region' aria-label="Slide 6 of 14" id="slide-6" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=6"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=6">Slide 6</a></noscript></div><div role='region'><p>To overcome the challenges of per-title and per-scene encoding, we developed a few models that can predict video quality based on certain encoding settings.</p>
<p>With this technology, large sets of test encodings are not needed.</p></div><div class="slide" role='region' aria-label="Slide 7 of 14" id="slide-7" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=7"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=7">Slide 7</a></noscript></div><div role='region'><p>As you can see on slides 7-8, we've developed a workflow with integrated machine learning models that can be adapted for per-title, per-scene and live encoding.</p>
<p>First, a source video is fed into the distribution workflow.</p>
<p>The source video's complexity is analyzed (such as resolution size, frame rate, etc.).</p>
<p>A regression algorithm is used to predict the optimized encoding profile, which is then applied to the video for production encoding.</p>
<p>The encoded video can then be made available for playback streaming.</p>
<p>In a live streaming scenario, 5-second clips are cut and analyzed in parallel.</p></div><div class="slide" role='region' aria-label="Slide 8 of 14" id="slide-8" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=8"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=8">Slide 8</a></noscript></div><div role='region'><p> presents the current and upcoming components for our end-to-end solution.</p>
<p>The main goal in integrating web API’s is to improve the performance and speed of our end-to-end solution for several use case scenarios.</p>
<p>Our current web solution includes basic browser functionalities and a video upload via the browser.</p>
<p>However, a more 'web-friendly' solution for this step in the workflow involves an automatic video upload via an URL.</p>
<p>Our current complexity analysis is conducted server-side.</p>
<p>All extracted video data is sent to our machine learning models via an endpoint.</p>
<p>Like Francois' stated in his presentation, “Media Processing Hooks Through the Web”, videos are processed and analyzed through frame extraction, which is also implemented for our video analysis component.</p>
<p>However, in our solution, the overall end-to-end solution becomes slower, as well as increase costs on the server-side when it comes to video analysis.</p>
<p>With that, a client-side analysis would improve the overall time of our solution.</p>
<p>For our machine learning component, the models are pre-trained and loaded in the browser to produce client-side predictions.</p>
<p>However, with each model, comes several predictions that must be filtered down in order to form a proper optimal encoding ladder.</p>
<p>To overcome this issue, we've developed an encoding ladder API in order to filter through the results, and select the bitrate/resolution pairs that lie close to the convex hull.</p>
<p>We are currently looking into the Web Neural Network and <a class=dfn>Model Loader API</a>’s to increase the performance of our models for use case scenarios such as super resolution for larger company-wide conference calls, our live streaming solution, and ultimately, a faster andmore automated process for our models in terms of generating predictions.</p>
<p>In the encoding/packaging component, while our production encoding is done server-side, integrating the <a class=dfn>WebCodecs</a> API for our live streaming townhall meetings can also optimize the overall end-to-end solution.</p></div><div class="slide" role='region' aria-label="Slide 9 of 14" id="slide-9" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=9"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=9">Slide 9</a></noscript></div><div role='region'><p>On slide 9, you’ll find screenshots of our web interface, which follows our previously discussed workflow.</p>
<p>In the middle screenshot, you can see our server-side video analysis taking place.</p>
<p>So, features such as the video metadata, characteristics, classification, scene changes, and spatial/temporal information are extracted and fed as requests for the machine learning endpoint.</p>
<p>Once analyzed, any of our pre-trained models can be selected to determine its optimal encoding ladder, which consists of the resolution, bitrate, and predicted VMAF score.</p>
<p>With this browser-based solution, users can filter down the predictions to certain encoding ladder representations, and perform a production encoding on the selected representations.</p></div><div class="slide" role='region' aria-label="Slide 10 of 14" id="slide-10" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=10"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=10">Slide 10</a></noscript></div><div role='region'><p> provides a brief overview of the models we’ve developed.</p>
<p>These models have been extensively trained on over 20 video attributes and thousands of test encodes derived from videos ranging from 360p - 1080p.</p>
<p>As a result, we’ve developed 4 working models, of which, XGBoost has been our best performing model in terms of accuracy.</p>
<p>We also have a convolutional neural network, which is geared towards image &amp; video processing, as well as the feed forward and stacked model.</p>
<p>As mentioned in the GitHub issue of 'ML model formats', it would be necessary to have standardized frameworks.</p>
<p>What we are currently looking into developing is a serving pipeline that supports all of our models so that separate instances do not have to be built for each framework.</p>
<p>While we tried to build all models under one framework, certain models such as the XGBoost was not possible with <a class=dfn>Keras</a>/Tensorflow.</p></div><div class="slide" role='region' aria-label="Slide 11 of 14" id="slide-11" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=11"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=11">Slide 11</a></noscript></div><div role='region'><p>In this talk, we've covered the concept of per-title encoding and a web/AI-based solution to automate the process as well as save the time and storage that usually follows the process of per-title encoding.</p>
<p>We've described a conventional static encoding ladder, where the same encoding settings are applied across all videos.</p>
<p>Then, the per-title encoding method, where bitrates and storage are saved.</p></div><div class="slide" role='region' aria-label="Slide 12 of 14" id="slide-12" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=12"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=12">Slide 12</a></noscript></div><div role='region'><p>With our AI-based solution, the large number of test encodes are avoided, and bandwidth and storage costs are saved even more.</p></div><div class="slide" role='region' aria-label="Slide 13 of 14" id="slide-13" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=13"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=13">Slide 13</a></noscript></div><div role='region'><p>We are currently optimizing the overall workflow in order to have a faster performance time.</p>
<p>For example, enhancing our current architecture with using the model loader API that can load a custom pre-trained model.</p>
<p>We’d also like to contribute to this API and the model standardization issue in order to further support our use cases.</p>
<p>We are also optimizing our machine learning models in order to minimize the difference between our predicted and production encodes and exploring other types of metrics that can further enhance our models.</p></div><div class="slide" role='region' aria-label="Slide 14 of 14" id="slide-14" data-fmt="pdf" data-src="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=14"><noscript><a href="https://www.w3.org/2020/Talks/mlws/ac_encoding.pdf#page=14">Slide 14</a></noscript></div><div role='region'><p>Thank you for watching my presentation and have a nice day!</p></div>